@model Booker.Data.Item

@functions {
    private string DisplayLevel(bool? level)
    {
        if (level == null)
            return "Nieznany poziom";
        return level.Value ? "Rozszerzenie" : "Podstawa";
    }

    private string DisplayGrade(string grade)
    {
        if (string.IsNullOrEmpty(grade))
            return "Nieznana klasa";

        if (grade == "Zależnie od poziomu")
            return grade;

        return $"Klasa {grade}";
    }
}

<article class="book-tile">
    <img src="@Model.Photo" alt="Zdjęcie książki: @Model.Book.Title" />
    <footer>
        <div class="info">
            <a asp-page="/Book" asp-route-id="@Model.Id">
                <h2>@Model.Book.Title</h2>
            </a>
        
            <p>@Model.Price zł</p>
            <p>
                <small>
                    @(string.IsNullOrWhiteSpace(Model.User?.School) ? "Nieznana szkoła" : Model.User.School)
                </small>
            </p>
        </div>
        <div class="actions">
            <button class="outline">
                @(string.IsNullOrWhiteSpace(Model.Book?.Subject?.Name) ? "Nieznany przedmiot" : Model.Book.Subject?.Name)
            </button>
            @if (Model.Book?.Grades != null)
            {
                @foreach (var grade in Model.Book.Grades)
                {
                    <button class="outline">@DisplayGrade(grade.GradeNumber)</button>
                }
            }
            
            @if (Model.Book?.Level != null)
            {
                <button class="outline">@DisplayLevel(Model.Book.Level)</button>
            }
        </div>
        <div class="fav">
            <button class="outline" aria-label="Dodaj do ulubionych" title="Dodaj do ulubionych">
                <svg>
                    <use href="img/icons.svg#si-awesome-star-o" />
                </svg>
            </button>
        </div>
    </footer>
</article>
