@* Chat page using Blazor static SSR + interactive server island for realtime chat *@
@page "{DealId?}"
@model Booker.Pages.ChatModel
@using Booker.Pages.Shared.Components
@{
    ViewData["Title"] = "TextBooker Chat";
}

<main>
    <h1>Chat</h1>

   <!-- @if (string.IsNullOrWhiteSpace(Model.DealId))
    {
        <p>Brak identyfikatora wątku. Przejdź do <a href="/Messages">listy wiadomości</a> aby wybrać lub rozpocząć rozmowę.</p>
    }
    else
    -->
    
        <component type="typeof(Booker.Pages.Shared.Components.Messenger)" 
               render-mode="ServerPrerendered" />
    

        <section class="chat-wrapper" aria-label="Historia rozmowy">
            <component type="typeof(Booker.Components.ChatRealtimeIsland)"
                       render-mode="Server"
                       param-DealId="Model.DealId"
                       param-InitialMessages="Model.Messages"
                       param-CurrentUserId="Model.CurrentUserId" />
        </section>
    
</main>
